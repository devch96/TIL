# 플라이웨이트 패턴(Flyweight Pattern)

## 플라이웨이트 패턴이란?

- 클래스의 인스턴스를 한 개만 가지고 여러 개의 `가상 인스턴스`를 제공하고 싶을 때 사용하는 패턴.
- 인스턴스를 가능한 공유시켜 쓸데없이 new 연산자를 통한 메모리 낭비를 줄이는 방식.
- 생성 된 객체 수를 줄이고 메모리 사용 공간을 줄여서 성능을 향상시키는데 사용한다.

## 플라이웨이트 패턴의 구조

![Flyweight Pattern Structure](../../images/Flyweight.png)

- Flyweight
    : 공유에 사용할 클래스들의 인터페이스를 선언한다. 플라이웨이트 내부에 저장된 상태를 고유한(intrinsic) 상태라고 하며,
    플라이웨이트의 메서드에 전달된 상태를 공유한(extrinsic) 상태라고 한다. 여러 Context에서 사용될 수 있다.

- Context
    : 공유한(extrinsic) 상태를 포함하며 모든 원본 객체들에서 고유(intrinsic)하다. 컨텍스트가 플라이웨이트 객체 중
    하나와 쌍을 이루면 원래 객체의 전체 상태를 나타낸다.

- FlyweightFactory
    : 기존 플라이웨이트들의 풀을 관리한다. 클라이언트는 플라이웨이트를 직접 만들지 않고 원하는 플라이웨이트의 내부 상태의 일부를 전달하여
    팩토리를 호출한다.

## 플라이웨이트 패턴의 적용

- 많은 수의 객체들을 지원해야 해서 사용할 수 있는 RAM을 거의 다 사용했을 때 사용.
- 생성된 객체가 오래도록 메모리에 상주하며 사용되는 횟수가 많을 경우 사용.

