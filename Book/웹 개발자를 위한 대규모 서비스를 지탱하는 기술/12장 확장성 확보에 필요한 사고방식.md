# 확장성 확보에 필요한 사고방식

-----------

## 계층과 확장성

### 확장성에 대한 요구

- 4코어, 8GB 메모리 정도의 서버를 사용하면 피크 시 성능이 수천 요청/분 정도 나옴
  - 월100만 PV(page view)처리
- 하지만 대규모일경우 확장해야함

### 계층별 확장성

- AP 서버는 비교적 간단하게 확장시킬 수 있음
  - 상태를 갖고 있지 않으므로 요청별로 다른 AP 서버로 날려보내도 처리상 문제가 발생하지 않고
  로드밸런서에 새로운 서버를 추가해가면 점점 확장됨
  - 대수만 늘리면 얼마든지 확장 가능
- DB나 파일 서버의 경우 분산, 확장성 확보가 매우 어려움
  - read는 분산 쉬움
  - write가 어려움

----------

## 부하 파악, 튜닝

### 부하 파악

- 확장할것인지 검토하기 위해서는 서버 부하를 파악할 수 있어야 함
- 제3 소프트웨어 혹은 자체 개발

### 부하를 측정하기 위한 항목

- 부하를 볼 때는 먼저 Load Average부터
  - 프로세스가 언제든지 동작할 수 있는 상태이지만 아직 실제 CPU가 할당되지 않아서 대기상태에 있는 프로세스 수의 평균치
  - 5분간 Load Average가 1이라면 5분동안 평균 1개의 프로세스가 대기상태로 되어 있다는 것을 의미
  - CPU 코어 수 이하이면 양호한 편
