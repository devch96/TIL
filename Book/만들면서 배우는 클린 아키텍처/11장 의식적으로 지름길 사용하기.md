# 의식적으로 지름길 사용하기

- 소프트웨어는 소프트하고 하드웨어에 비해 쉽게 변경할 수 있기 때문에 어떤 때는 지름길을 먼저 취하고 나중에 고치는 것이
실제로 더 경제적일 수도 있다.

--------------

## 왜 지름길은 깨진 창문 같을까?

- 어떤 것이 멈춘 것처럼 보이고, 망가져 보이고 혹은 관리되지 않는다고 여겨지면 인간의 뇌는 이를 더 멈추고, 망가뜨려도 된다고 생각하게 된다.
  - 품질이 떨어진 코드에서 작업할 때 더 낮은 품질의 코드를 추가하기가 쉽다.
  - 코딩 규칙을 많이 어긴 코드에서 작업할 때 또 다른 규칙을 어기기도 쉽다.
  - 지름길을 많이 사용한 코드에서 작업할 때 또 다른 지름길을 추가하기도 쉽다.

--------------

## 깨끗한 상태로 시작할 책임

- 깨진 창문 심리에 무의식적으로 영향을 받기 때문에 가능한 한 지름길을 거의 쓰지 않고 기술 부채를 지지 않은 채로 프로젝트를 깨끗하게 시작하는 것이
중요하다.
- 그러나 때로는 지름길을 취하는 것이 더 실용적일 때도 있음
  - 작업 중인 부분이 프로젝트 전체로 봤을 때 그리 중요하지 않은 부분이거나
  - 프로토타이핑 작업 중이거나
  - 경제적인 이유 등

---------------

## 유스케이스 간 모델 공유하기

- 유스케이스 간 모델을 공유하면 유스케이스들이 결합된다.
  - 변경할 이유를 공유하는 것
  - 단일 책임 원칙 위배
- 유스케이스 간 입출력 모델을 공유하는 것은 유스케이스들이 기능적으로 묶여 있을 때 유효하다
  - 특정 요구사항을 공유할 때 괜찮다는 의미
  - 특정 세부사항을 변경할 경우 실제로 두 유스케이스 모두에 영향을 주고 싶은 것
- 독립적으로 진화해야 한다면 처음에는 똑같은 입출력 클래스를 복사해야 하더라도 일단 분리해서 시작해야 함

------------

## 도메인 엔티티를 입출력 모델로 사용하기

- 간단한 생성이나 업데이트 유스케이스에서는 유스케이스 인터페이스에 도메인 엔티티가 있는 것이 괜찮을 수도 있다
  - 데이터베이스에 저장해야 하는 바로 그 상태 정보가 엔티티에 있기 때문
- 유스케이스가 단순히 데이터베이스의 필드 몇 개를 업데이트하는 수준이 아니라 더 복잡한 도메인 로직을 구현해야 한다면 유스케이스 인터페이스에 대한 전용
입출력 모델을 만들어야 한다.
- 도메인 엔티티를 입력 모델로 사용했더라도 도메인 모델로부터 독립적인 전용 입력 모델로 교체해야 하는 시점을 잘 파악해야 한다.

------------

## 인커밍 포트 건너뛰기

- 아웃고잉 포트는 애플리케이션 계층과 아웃고잉 어댑터 사이의 의존성을 역전시키기 위한 (의존성이 안쪽으로 향하게 하는) 필수 요소인 반면 인커밍 포트는 의존성 역전에
필수적인 요소는 아니다.
- 인커밍 포트를 제거함으로써 인커밍 어댑터와 애플리케이션 계층 사이의 추상화 계층을 줄일 수 있다.
- 하지만 인커밍 포트는 애플리케이션 중심에 접근하는 진입점을 정의하기에 이를 제거하면 특정 유스케이스를 구현하기 위해 어떤 서비스 메서드를
호출해야 할지 알아내기 위해 애플리케이션의 내부 동작에 대해 더 잘아야 한다.
  - 전용 인커밍 포트를 유지하면 한눈에 진입점을 식별할 수 있음
- 애플리케이션의 규모가 작거나 인커밍 어댑터가 하나밖에 없어서 모든 제어 흐름을 인커밍 포트의 도움 없이 단숨에 파악할 수 있다면 인커밍 포트가 없는 것이 편하다.
- 그러나 애플리케이션의 규모가 작게 유지되거나 인커밍 어댑터가 계속 하나밖에 없을것이라고 확신할 순 없다.

------------

## 애플리케이션 서비스 건너뛰기

- 간단한 CRUD 유스케이스에서는 보통 애플리케이션 서비스가 도메인 로직 없이 생성, 업데이트, 삭제 요청을 그대로 영속성 어댑터에 전달하기 때문에 정말 구미가
당기는 방법이다.
- 하지만 인커밍 어댑터와 아웃고잉 어댑터 사이에 모델을 공유해야 한다.
- 유스케이스가 엔티티를 단순히 생성, 업데이트, 삭제하는 것보다 더 많은 일을 하게 되면 애플리케이션 서비스를 만든다는 명확한 가이드라인을 팀에 정해둬야 한다.

---------

## 유지보수 가능한 소프트웨어를 만드는 데 어떻게 도움이 될까?

- 경제적인 관점에서 지름길이 합리적일 때도 있다.
- 모든 애플리케이션은 처음에는 작게 싲가하기 때문에 유스케이스가 단순한 CRUD 상태에서 벗어나는 시점이 언제인지에 대해 팀이 합의하는 것이 매우 중요하다.
- 합의를 이루고 난 후네야 팀은 지름길을 장기적으로 더 유지보수하기 좋은 아키텍처로 대체할 수 있다.
- 어떤 경우든 아키텍처에 대해, 그리고 왜 특정 지름길을 선택했는가에 대한 기록을 남겨서 나중에 우리 자신 또는 프로젝트를 인계받는 이들이 이 결정에 대해 다시 평가할 수 있게 하면 좋다.