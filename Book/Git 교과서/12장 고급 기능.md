# 고급 기능

------------

## refs

- 깃은 커밋으로 코드 이력을 관리. 커밋은 SHA1 해시 값을 가지고 있으며 해시 값은 여러 기능에서 참조함
- 깃에서 참조하는 해시 값을 refs 목록으로 가지고 있음

### 해시

- 깃은 SHA1 알고리즘을 사용하여 해시 값을 생성
- 생성된 모든 해시 값은 show 명령어로 확인 가능

### 역조회

- show 명령어는 해시 값을 사용하여 커밋 정보를 확인
- rev-parse 명령어는 포인터로 해시 값을 알 수 있음.
- git rev-parse master

### 참조 목록

- 생성된 해시 값을 쉽게 참조할 수 있도록 refs 목록을 생성
- 깃의 모든 refs 목록은 .git/refs 폴더 안에 저장됨

---------------

## reflog

### 참조 기록

- git reflog
- reflog는 한번이라도 사용했던 HEAD와 브랜치를 기록
- 하지만 영구적으로 가지고 있진 않고 시스템에서 정의한 며칠 간의 기록만 보관

### 기록 확인

- reflog의 기록들은 HEAD@{숫자} 형태
- 숫자는 작업을 수행한 해시 값
- reflog에 기록된 값을 이용하여 커밋 정보를 확인할 수 있음
- git show HEAD@{0}

### 기간 확인

- 커밋의 로그 기록이 많은 경우 필터링 가능
- git show master@{yesterday}

-----------------

## 파일 애너테이션

### blame

- 잘못된 코드가 어디서부터 시작되었는지 찾기 힘듬
- 깃은 파일의 수정 이력을 분석
- blame 기능은 커밋의 메타 정보를 코드 라인별로 같이 결합하여 출력

### blame 명령어

- blame 명령어는 개별 파일에서만 동작
- git blame 파일이름
- 커밋에 대한 해시 값, 작성자, 코드 등 내용도 보여줌
- 누가 코드의 어느 라인을 수정했는지 파악할 때 유용

### 옵션 활용

- 소스 코드 용량이 클 때는 이력 정보도 많이 출력
- git blame -L 시작줄, 마지막줄 파일이름
- -e: 사용자 이름 대신 이메일
- -w: 공백 문자 무시
- -M: 같은 파일 내에서 복사나 이동을 감지
- -C: 다른 파일에서 이동이나 복사된 것을 감지

----------------

## rerere

### 동일한 충돌

- 협업 중 발생하는 여러 문제 중 일부는 같은 유형의 문제
- 비슷한 충돌 패턴을 반복적으로 수동으로 해결하곤 함
- rerere 는 reuse recorded resolution의 약어로 어떤 문제로 충돌이 발생할 때 이를 기록
- rerere 기능을 활성화하면, 깃은 충돌을 해결할 때마다 해결한 문제의 유형을 기록하고 비슷한 문제가 향후 다시 발생한다면, 미리 기록한 해결 정보를 바탕으로 적용

### 활성화

- 기본적으로 활성화되지 않음
- git config rerere.enabled true
- rerere 기능은 병합과 리베이스로 잦은 충돌이 발생하여 이를 좀 더 쉽게 해결하고 싶을 때 유용