# 코드에 대해 생각하기

-------------

## 코드를 더 깊이 있게 이해하기

- 코드가 하는 일이 무엇인지 이해하고 나면, 다음 단계는 코드에 대해 좀 더 깊이 생각하는 것이다.
  - 코드는 어떻게 작성되었고 새로운 기능은 어디에 추가해야 하며 다른 방식을 설계를 한다면? 등

### '변수 역할' 프레임워크

- 코드에 대해 추론할 때는 변수가 중심적인 역하을 한다.
  - 변수가 어떤 종류의 정보를 담고 있는지 이해하는 것은 코드를 추론하고 수정하는 데 결정적인 역할을 한다.
  - 이 때문에 적절한 변수명은 표식으로 사용될 수 있고 읽고 있는 코드를 깊이 이해하는 데도 도움이 된다.
- 변수를 이해하기 어려운 이유는 대부분의 프로그래머가 변수를 연관 지을 좋은 스키마를 자신들의 LTM에 가지고 있지 않기 때문이다
  - '변수'나 '정수'처럼 너무 많은 것을 포함하는 청크를 사용하거나 number_of_customer 같은 너무 구체적인 변수명처럼 너무 적은 것을
  포함하는 청크를 사용하는 경향이 있다고 함

#### 변수는 각자 다른 일을 한다

```
upperbound = int(input('Upper bound?'))
max_prime_factors = 0
for counter in range(upperbound):
    factors = prime_factors(counter)
    if factors > max_prime_factors:
        max_prime_factors = factors 
```
- upperbound, counter, factors, max_prime_facotrs 이렇게 4개의 변수를 갖는다.
- 변수 역할 프레임워크는 변수들의 동작에 존재하는 차이점을 포착함
  - upperbound는 최근값 보유자(most recent holder) 역할
    - 최근에 입력된 상한 값을 보유함
  - counter는 스테퍼(stepper) 역할
    - 루프를 따라 반복
  - max_prime_factors는 목적값 보유자(most wanted holder) 역할
    - 프로그램이 계산을 통해 찾고자 하는 값
  - factors도 최근값 보유자 역할
    - 가장 최근에 소인수분해된 수를 저장

#### 11가지 역할

- 어느 코드든 변수들이 하는 역할은 비슷
1. 고정값(fixed value)
   - 초기화를 통해 값이 할당된 이후 값이 변경되지 않는 변수
     - 값을 고정하는 것이 가능한 프로그래밍 언어라면 상수(constant) 아니라면 초기화 된 후 변경되지 않는 변수
     - 파이 같은 수학 상수 혹은 파일이나 데이터베이스에서 읽어 들인 데이터의 값
2. 스테퍼(stepper)
   - 루프를 반복 실행하며 값이 단계적으로 변하는 변수
     - 다음 단계가 시작할 때 그 값을 예측할 수 있음
   - for 루프를 반복할 때 사용하는 i 같은 정수
3. 플래그(flag)
   - 무엇인가 발생했거나 어떤 경우에 해당하는지를 나타내는 변수
   - is_set, is_available, is_error 등등
   - 주로 불리언 변수지만 정수 혹은 문자열도 가능
4. 워커(walker)
   - 스테퍼와 유사하게 자료구조를 순회함
   - 스테퍼와의 차이점은 자료구조를 순회하는 방식
     - 스테퍼: for i in range(0, n)처럼 항상 미리 정해진 값을 따라 반복
     - 워커: 루프가 시작되기 전에는 어떤 값을 가지게 될지 알 수 없음
   - 포인터나 정수 인덱스가 워커로 사용될 수 있음
5. 최근값 보유자(most recent holder)
   - 어떤 값이 변해갈 때 가장 최근에 변경된 값을 갖는 변수
6. 목적값 보유자(most wanted holder)
   - 찾고자 하는 값 혹은 현재까지 발견된 값 중에서 찾고자 하는 조건에 부합하는 값을 갖는 변수
     - 최솟값, 최댓값 혹은 어떤 조건을 만족하는 첫 번째 값 등
7. 모집자(gatherer)
   - 데이터를 모으거나 모은 데이터에 대해 어떤 연산을 수행하여 얻은 값을 저장하는 변수
   - for i in range(list): sum += list[i] 에서 sum이 모집자 변수
8. 컨테이너(container)
   - 값을 새로 추가하거나 삭제할 수 있는 자료구조라면 어떤 것이라도 컨테이너 변수
     - 리스트, 배열, 스택, 트리 ...
9. 추적자(follower)
   - 어떤 알고리즘에서 이전 값 혹은 다음 값을 추적해야 할 필요가 있을 때 이런 역할을 수행하는 변수
   - 항상 다른 변수와 연관되어 있음
     - 연결 리스트에서 이전 값에 대한 포인터나 이진 트리에서 이전에 방문한 원소의 인덱스
10. 조직자(organizer)
    - 다른 값을 저장하기 위한 목적으로 사용하는 변수
      - 문자열 내 개별 문자에 접근하려면 먼저 문자 배열로 변환해야 함
      - 주어진 리스트를 정렬한 결과를 따로 가지고 있어야 함
11. 임시(temporary)
    - 잠시만 사용하기 위한 변수로 temp나 t라는 변수명을 많이 사용
    - 데이터를 맞바꾸거나 메서드나 함수에서 여러 번 사용되는 계산의 결과를 저장할 때 사용

### 역할과 패러다임

- 역할은 특정한 프로그래밍 패러다임에 제한되지 않고 모든 패러다임에 나타난다.

```java
public class Dog {
    String name;
    int age;
    public Dog (String n) {
        name = n;
        age = 0;
    }
    public void birthday () {
        age++;
    }
}
```

- name은 속성이 초기화된 이후에는 변경되지 않기 때문에 '고정값' 변수
- age 속성은 0에서 시작해서 birthday() 메서드가 호출될 때마다 증가하기 때문에 스테퍼 역할

#### 역할의 이점

- 사야니에미의 프레임워크는 새로운 개념이라기보다는 변수에 대해 논의할 때 사용할 수 있는 새로운 용어를 제공해주는 정도로 생각
  - 같은 팀원끼리 공유하면 코드를 이해하고 의사소통하는 데 큰 도움이 될 것

#### 헝가리안 표기법

- 변수의 타입을 변수명에 나타내는 방식
  - strName(문자열 타입의 변수) , lDistance(롱 타입의 변수)
- 변수의 이름이 길어지므로 코드를 읽을 때 어떤 면에서는 어려움을 유발할 수 있음.
- 변수의 타입을 변경하게 되면 많은 변수에 영향을 미칠 수도 있음
- 오늘날에는 대부분의 에디터에서 변수의 타입을 쉽게 확인할 수 있고 변수명이 길어진다는 단점 때문에 그다지 유용하지 않음
  - 권장되지 않음

### 프로그램에 대해 깊이 있는 지식을 얻으려면

#### 텍스트 지식 대 계획 지식

- 패닝턴은 프로그래머가 소스 코드를 이해하는 두 개의 서로 다른 층위에 대한 모델을 제시
  - 텍스트 구조 지식
    - 키워드가 하는 일이나 변수의 역할 같은 프로그램의 표면적인 이해와 관련
  - 계획 지식
    - 프로그래머가 프로그램을 작성할 때 계획한 것이 무엇인지 혹은 무엇을 달성하려고 했는지를 나타냄

#### 프로그램 이해의 여러 단계

- 프로그램에 대한 계획 지식을 갖는다는 것은 코드의 각 부분이 다른 부분들과 어떤 방식으로 관련되어 있는지 이해하는 것을 의미
- 표면적 지식으로부터 더 깊은 이해로의 진행은 다음 4가지 단계를 거친다.

1. 초점을 찾는다.
   - 하나의 초점에서 코드 파악을 시작하라.
   - main() 메서드일 수도 있고, 런타임 오류나 프로파일러가 실행 시간이 오래 걸린다고 알려준 라인과 같이 깊은 이해가 필요한 코드일 수도 있다.
2. 초점으로부터 지식을 확장한다.
   - 코드에 존재하는 관계를 찾자.
   - 초점에서 부터 시작해 역할이 있는 관련 개체
3. 관련된 개체로부터 개념을 이해한다.
   - 코드에서 밀접하게 연결된 부분은 중요한 개념을 나타낼 가능성이 높기 때문에 이것들 역시 더 자세한 연구를 위한 초점이 될 수 있다.
   - 중요한 부분을 파악하고 나면 모든 관련 클래스를 나열하고 이들 관계에 대해 깊이 있게 생각
4. 여러 개체에 걸쳐 있는 개념을 이해한다.
   - 코드에 있는 서로 다른 개념들을 고수준에서 이해한다.
     - 자료구조 뿐 아니라 자료구조에 적용된 연산과 그 연산에 대한 제약 등

### 코드 읽기에 적용해볼 수 있는 텍스트 이해 전략

- 코드를 이해하려고 할 때 사용하는 인지적 능력은 자연언어를 읽을 때 사용하는 것과 유사하다.
- 자연언어 텍스트 이해에 대한 연구에서 얻은 통찰을 코드 읽기에도 적용할 수 있다.

### 요약

- 생소한 코드를 읽을 때는 스테퍼나 목적값과 같은 변수의 역할을 이해하는 것이 코드를 깊이 이해하는 데 도움이 된다.
- 코드를 읽는 것과 자연언어 텍스트를 읽는 것 사이에는 유사한 점이 많고, 자연언어를 배우는 능력으로 프로그래밍을 배우는 능력을 예측할 수 있다.
