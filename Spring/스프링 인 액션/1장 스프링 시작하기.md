# 스프링 시작하기

- 관계형 데이터베이스를 사용하는 웹 브라우저 기반의 웹 애플리케이션의 형태 개발은 여전히 유용하며 스프링 또한 거기에 맞게 잘 준비되어 있지만,
지금은 다양한 데이터베이스에 데이터를 저장하는 클라우드에 맞춰진 마이크로서비스로 구성된 애플리케이션의 개발에도 관심이 높다.
  - 더 큰 확장성과 향상된 성능을 제공하는 리액티브 프로그래밍도 새로운 관심사가 되었다.

----------

## 스프링이란?

- 대부분의 애플리케이션은 애플리케이션 전체 기능 중 일부를 담당하는 많은 컴포넌트로 구성되며, 각 컴포넌트는 다른 애플리케이션 구성 요소와
협력해서 작업을 처리한다. 그리고 애플리케이션이 실행될 때는 각 컴포넌트가 어떻게든 생성되어야 하고 상호 간에 알 수 있어야 한다.
- 스프링은 스프링 애플리케이션 컨텍스트(Spinrg application context)라는 컨테이너를 제공하는데, 이것은 애플리케이션 컴포넌트들을 생성하고 관리한다.
- 애플리케이션 컴포넌트 또는 빈(bean)들은 스프링 애플리케이션 컨텍스트 내부에서 서로 연결되어 완전한 애플리케이션을 만든다.
- 빈의 상호 연결은 의존성 주입(Dependency Injection, DI)라고 알려진 패턴을 기반으로 수행된다.
  - 애플리케이션 컴포넌트에서 의존(사용)하는 다른 빈의 생성과 관리를 자체적으로 하는 대신 별도의 개체(컨테이너)가 해주며, 이 개체에서
  모든 컴포넌트를 생성, 관리하고 해당 컴포넌트를 필요로 하는 빈에 주입(연결) 한다.
  - 생성자 인자 또는 속성의 접근자 메서드를 통해 처리한다.
- 지금까지의 스프링 버전에서는 컴포넌트 및 다른 컴포넌트와의 관계를 나타내는 하나 이상의 XML 파일을 사용해서 빈을 상호 연결하도록 스프링 애플리케이션 컨텍스트에
알려주었다.
```xml
<beans>
  <bean id="inventoryService" class="com.example.InventoryService">
  </bean>
  <bean id="productService" class="com.example.ProductService">
    <constructor-arg ref="inventoryService"/>
  </bean>
</beans>
```
- 최신 버전의 스프링에서는 자바 기반의 구성(configuration)이 더 많이 사용된다.

```java
@Configuration
public class ServiceConfiguration {
  @Bean
  public InventoryService inventoryService() {
    return new InventoryService();
  }

  @Bean
  public ProductService productService(){
      return new ProductService(inventoryService());
  }
}
```
- @Configuration 애너테이션은 각 빈을 스프링 애플리케이션 컨텍스트에 제공하는 구성 클래스라는 것을 스프링에게 알려 준다.
- 구성 클래스의 메서드에는 @Bean 애너테이션이 지정되어 있으며, 이것은 각 메서드에서 반환되는 객체가 애플리케이션 컨텍스트의 빈으로 추가되어야 한다는 것을
나타낸다
  - 기본적으로 각 빈의 ID가 해당 빈을 정의하는 메서드의 이름과 동일하다.
- XML 기반 구성에 비해 자바 기반 구성은 더 강화된 타입 안전과 향상된 리팩토링 기능을 포함해서 몇 가지 장점을 제공한다.
- 하지만 스프링은 자동-구성 기능이 있어서 자동-구성을 할 수 없을 경우에만 사용하면 된다.
- 자동-구성은 자동 연결(autowiring)과 컴포넌트 검색(component scanning)이라는 스프링 기법을 기반으로 한다.
  - 컴포넌트 검색을 사용하여 스프링은 자동으로 애플리케이션의 classpath에 지정된 컴포넌트를 찾은 후 스프링 애플리케이션 컨텍스트의 빈으로 생성할 수 있다.
  - 스프링은 자동 연결을 사용하여 의존 관계가 있는 컴포넌트를 자동으로 다른 빈에 주입(연결)한다.

----------

## 스프링 살펴보기

### 핵심 스프링 프레임워크

- 스프링의 웹 프레임워크인 스프링 MVC
  - 웹 요청을 처리하기 위해 스프링 MVC를 사용해서 컨트롤러 클래스를 작성
  - HTML이 아닌 출력을 생성하는 REST API를 만들 때도 스프링 MVC를 사용할 수 있음
- 탬플릿 기반의 JDBC 지원
- 리액티브 프로그래밍
  - 스프링 MVC개념의 스프링 WebFlux

### 스프링 부트

- 스타터 의존성과 자동-구성을 포함하는 스프링 부트
- 다음의 편리한 기능도 제공
  - 액추에이터(Actuator)
    - 애플리케이션의 내부 작동을 런타임 시에 살펴볼 수 있는 기능을 제공.
    - 매트릭, 스레드 덤프 정보, 애플리케이션의 상태, 애플리케이션에서 사용할 수 있는 환경 속성이 포함
  - 환경 속성의 명세
  - 핵심 프레임워크에 추가되는 테스트 지원
- 스프링 부트 CLI를 제공
  - CLI를 사용하면 애플리케이션 전체를 그루비 스크립트들로 작성하여 명령행에서 실행할 수 있음.

### 스프링 데이터

- 간단한 자바 인터페이스로 우리 애플리케이션의 데이터 리퍼지터리를 정의할 수 있음.
  - 저장하고 읽는 메서드를 작명 규칙을 사용해서 정의
- 스프링 데이터는 서로 다른 종류의 데이터베이스와 함께 사용될 수 있음.

### 스프링 시큐리티

- 인증(authentication), 허가(authorization), API 보안을 포함하는 폭넓은 범위의 애플리케이션 보안 요구를 다룬다.

### 스프링 통합과 배치

- 스프링 통합은 데이터가 사용 가능한 즉시 처리되는 실시간 통합을 한다.
- 스프링 배치에서는 다량의 데이터가 처리되는 시점을 트리거가 알려줄 때 데이터가 수집 처리되는 배치 통합을 처리해준다.

### 스프링 클라우드

- 애플리케이션을 거대한 하나의 단일체로 개발하는 대신 마이크로서비스라는 여러 개의 개별적인 단위들로 합성해서 개발할 때 사용

----------

## 요약

- 웹 애플리케이션 생성, 데이터베이스 사용, 애플리케이션 보안, 마이크로서비스 등에서 개발자의 노력을 덜어주는 것이 스프링의 목표다.
- 스프링 부트는 손쉬운 의존성 관리, 자동-구성, 런타임 시에 애플리케이션 내부 작동 파악을 스프링에서 할 수 있게 한다.
- 빈(bean)이라고 하는 컴포넌트는 스프링 애플리케이션 컨텍스트에서 자바나 XML로 선언할 수 있으며, 컴포넌트 탐색으로 찾거나
스프링 부트 자동-구성에서 자동으로 구성할 수도 있다.