# 스프링 @MVC

-----------

- 애너테이션을 중심으로 한 새로운 MVC의 확장 기능은 @MVC라는 별칭으로도 불림

----------

## @RequestMapping 핸들러 매핑

- 핸들러 매핑과 핸들러 어댑터의 대상이 오브젝트가 아니라 메서드라는 점
- Controller와 같이 하나의 메서드를 가진 인터페이스로 정의되는 컨트롤러는 특별한 방법을 사용하지 않는 한 URL 당 하나의 컨트롤러 오브젝트가 매핑되고
컨트롤러당 하나의 메서드만 DispatcherServlet의 호출을 받을 수 있음
- 반면 @MVC에서는 모든 것이 메서드 레벨로 세분화됨
- @MVC의 핸들러 매핑을 위해서는 DefaultAnnotationHandlerMapping이 필요함
  - 디폴트라 따로 등록은 안해도 됨
  - 다른 핸들러 매핑 빈을 등록했다면 등록해주어야 함
    - 디폴트가 사라지기 때문

### 클래스/메서드 결합 매핑정보

- @RequestMapping은 타입 레벨이랑 메서드 레벨에 붙일 수 있음
  - 스프링은 두 가지 위치에 붙은 정보를 결합해서 최종 매핑정보를 생성함
  - 기본적인 결합 방법은 타입 레벨(클래스)정보를 기준으로 삼고 메서드 레벨의 정보는 타입 레벨의 매핑을 더 세분화하는데 사용

#### @RequestMapping 애노테이션

- String[] value(): URL 패턴
  - 디폴트 엘리먼트
  - 스트링 배열 타입으로 URL 패턴을 지정함
  - ANT 스타일의 와일드카드를 사용할 수 있음
  - {}를 같이 사용하는 URI 템플릿을 사용할 수도 있음
    - 패스 변수(path variable)이라고 불리며 하나 이상 등록가능함
    - 컨트롤러 메서드에서 파라미터로 전달받을 수 있음
  - 하나 이상의 URL 패턴을 지정할 수 있음
  - 디폴트 접미어 패턴이 적용됨
    - 확장자가 붙지 않고 /로 끝나지도 않는 URL 패턴에는 디폴트 접미어 패턴이 적용되서 /, .*이 붙음
    - 스프링부트 3 에서부터는 /로 끝나지 않는 URL 패턴과 /로 끝나느 패턴이 분리됨
- RequestMethod[] method(): HTTP 요청 메서드
  - RequestMethod는 HTTP 메서드를 정의한 이넘(enum)
  - GET, HEAD, POST, PUT, DELETE, OPTIONS, TRACE 7개의 HTTP 메서드 정의
- String[] params(): 요청 파라미터
  - 요청의 파라미터와 그 값을 비교해서 매핑해주는 것
  - 파라미터가 들어오는 것에 따라 매핑이 달라짐
  - 매핑 기준으로 매핑조건이 동시에 만족된다면 좀 더 상세한 쪽이 선택됨
- String[] headers(): HTTP 헤더
  - 헤더이름=값 형식을 사용

#### 타입 레벨 매핑과 메서드 레벨 매핑의 결합

- 타입(클래스와 인터페이스) 레벨에 붙는 @RequestMapping은 타입 내의 모든 매핑용 메서드의 공통 조건을 지정할 때 사용
- 메서드 레벨에서 조건을 세분화함
- 타입 레벨에 /user/*, 메서드 레벨에 /add가 선언되면
  - /user/add
- 타입 레벨에 /user/**, 메서드 레벨에 /add가 선언되면
  - /user/**/add

#### 메서드 레벨 단독 매핑

- 타입 레벨에서는 조건을 주지 않고 메서드 레벨에서 독립적으로 매핑정보를 지정할 수도 있음
- 타입 레벨에 @RequestMapping을 붙이긴 해야함