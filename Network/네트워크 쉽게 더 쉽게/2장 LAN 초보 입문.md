# LAN 초보 입문

-----------

## OSI 기본 참조 모델

### 통신을 위한 대전제

- 우리 사회에서는 누구와 정보를 주고받을 경우에 지켜야 하는 약속이 있음
  - 편지를 보낼 때 우편번호를 쓰고 받는 사람의 주소, 자신의 주소 등을 기입하고 우표를 붙이는 법칙
- 컴퓨터 간의 통신도 공통의 약속이 필요한데 이 약속을 프로토콜이라 함
  - IP, HTTP 등
- 컴퓨터 통신의 프로토콜은 ISO(International Organization for Standardization, 국제 표준화 기구)
라는 단체가 추진하는 OSI(Open System Interconnection, 개방형 시스템 간 상호 접속)로 설계 방침이 정해져 있음
- OSI는 컴퓨터 네트워크의 기본적인 모델을 만드므로 OSI 기본 참조 모델이라고 불림
  - 여러 다른 제조사의 네트워크 기기 간의 통신이 문제없이 이루어지기 위해 따라야만 하는 국제 표준

### OSI 기본 참조 모델

- 일곱 계층에 모델화하고 있는 것이 특징

#### OSI 기본 참조 모델 각 계층의 역할

- 1~4 계층까지는 통신 기능을 실현함
  - 하위 계층
- 5~7 계층까지는 애플리케이션 기능을 실현함
  - 상위 계층
- 네트워크의 기능을 계층화한 이유는 각 계층의 독립성과 전문성을 높여 새로운 기술에 유연히 대응하도록 만들기 위해서임
  - 유선 LAN을 무선 LAN 으로 변경했다고 전자 우편의 설정까지 변경할 필요가 없는데 이것은 네트워크 안에서 계층이 기능별로
  독립되어 있기 때문
- 실제 실무에서는 트러블 슈팅을 할 때 OSI 기본 참조 모델의 개념이 필요함
  - 지금 어느 계층에 장애가 발생했을까? 라는 시점에서 장애 분석을 하기 때문

#### OSI 기본 참조 모델 각 계층의 데이터 단위

- 각 계층의 데이터 전송에서 불리는 이름이 바뀜
  - 제4계층 트랜스포트 계층: 세그먼트
  - 제3계층 네트워크 계층: 패킷
  - 제2계층 데이터 링크 계층: 프레임
- 패킷이라고 부를 때는 네트워크 계층에서의 통신, 프레임이라고 부를 때는 데이터 링크 계층에서의 통신임

### 정리

- 프로토콜이란 통신을 하기 위한 공통 순서를 정해 둔 것
- OSI 기본 참조 모델은 다른 제조사나 컴퓨터나 시스템을 상호 접속되게 하는 것을 목적으로 제정됨
- OSI 기본 참조 모델의 각 계층별로 PDU(제어 정보와 데이터에 따라 구성되는 단위)를 부르는 이름이 달라짐

--------------

## LAN

### 네트워크 전체에서의 LAN의 위치

- 소규모 거점 네트워크에서 LAN과 WAN의 경계는 라우터 부분
- 사용자 단말 쪽은 LAN 상에 위치

### LAN의 구성 요소

- 현재 LAN은 이더넷(Ethernet)으로 구성되는 것이 대부분
- 이더넷은 OSI 물리 계층(1계층)과 데이터 링크 계층(2계층)에 대한 규격
- 이더넷으로 LAN을 구축하기 위해서는 다음의 하드웨어를 사용함
  - LAN 카드
  - UTP 케이블
  - 스위치(허브)
- LAN 카드는 요샌 컴퓨터에 탑재되어 있는 경우가 많음
  - UTP 케이블을 꽂는 곳
  - 네트워크와 단말(PC 등)의 경계면(인터페이스)라는 의미에서 네트워크 인터페이스 카드(Network Interface Card, NIC)라고 함
- UTP(Unshielded Twisted Pair) 케이블은 두 개의 동선을 꼬아 만든 것을 1페어로 4페어의 선을 묶은 케이블
  - 한쪽은 LAN 카드에, 다른 한쪽은 스위치에 꽂음
- LAN 카드나 네트워크 기기는 읽기 전용 메모리(ROM)를 가지고 있어 그곳에 고유의 주소가 기록되어 있음
  - 이 주소를 MAC 주소라고 하며 이더넷 통신에는 이 MAC 주소가 사용됨
- 라우터를 지나면 레이어3 통신이 됨
  - 이더넷에서 라우터까지는 레이어2의 MAC 주소만으로 통신
  - 레이어3은 주소 정보(IP 주소)를 본 후 통신 대상이 결정됨
- 다른 네트워크로 전달되는 통신을 라우팅이라고 함

#### 케이블의 사용 구분

- 다이렉트 케이블
  - PC 단말과 스위치 간 또는 스위치와 라우터 간 접속용으로 사용
- 크로스 케이블
  - 스위치 간이라 라우터와 PC 단말을 직접 연결할 때 사용

### 정리

- 각 거점에서는 라우터가 LAN과 WAN의 경계가 됨
- 이더넷 통신에는 MAC 주소라는 단말 고유의 주소를 사용함
- 다른 네트워크 간의 통신을 라우팅이라고 함

------------

## IP 주소

### 네트워크 기기에 주소 할당

- 네트워크에서 데이터를 네트워크 기기나 단말에 보내기 위해 식별 정보가 필요한데 이 정보가 바로 IP주소
- MAC 주소가 비교적 좁은 범위의 레이어2 통신에 사용되는 반면 IP 주소는 라우터를 통한 다른 네트워크와 통신하는 넓은 범위의
통신을 위해 필요함
- IP 주소는 TCP/IP의 IP 프로토콜로 사용되는 것

### IP 주소의 클래스

- IP 주소는 네트워크 주소 부분과 호스트 주소 부분으로 나뉘지만 그 경계가 고정된 것은 아님
- IP 주소는 클래스 A부터 E까지 다섯 개의 클래스로 나눠져 있고, 클래스에 따라 경계가 다름
  - 사용자에게 할당되는 주소는 A~C

#### 주소 시작이 1~126이면 클래스 A

- 클래스 A는 맨 앞의 1비트가 '0'으로 시작함
- 상위 8비트가 네트워크 주소 부분이고 하위 24비트가 호스트 주소 부분

#### 주소의 시작이 128~191이면 클래스 B

- 클래스 B는 맨 앞의 2비트가 '10'으로 시작함
- 상위 16비트가 네트워크 주소 부분이고 하위 16비트가 호스트 주소 부분

#### 주소의 시작이 192~223이면 클래스 C

- 클래스 C는 맨 앞의 3비트가 '110'으로 시작함
- 상위 24비트가 네트워크 주소 부분이고 하위 8비트가 호스트 주소 부분
- 클래스 D는 멀티캐스트용 주소, 클래스 E는 실험용 주소이기 때문에 어느 것도 사용자의 주소로 할당할 수 없음

### 할당할 수 없는 주소

- IP 주소의 약속 중 하나로 사용자에게 할당할 수 없는 주소가 있음
  - 호스트 주소 부분의 비트가 전부 0
    - 호스트 주소 부분의 비트가 전부 0인 주소는 네트워크 그 자체를 나타내는 네트워크 주소로 사용되기 떄문
    - 172.16.0.0
  - 호스트 주소 부분의 비트가 전부 1
    - 호스트 주소 부분의 비트가 전부 1인 주소는 브로드캐스트 주소로 사용되기 때문
    - 172.16.255.255
- 브로드캐스트란 네트워크 내의 불특정 다수에게 패킷을 동시에 전달하는 것
  - 통신 상대를 지정할 수 없을 때 사용함
브로드캐스트의 범위는 사용자 단말에서 라우터까지

### 특수 용도의 주소

- 주소의 시작이 127인 것은 루프백(네트워크상에서 자기 자신을 나타내는 인터페이스 또는 그 주소, 127.0.0.1)
주소용으로 예약되어 있기 때문에 일반 사용자에게 주소로 할당할 수 없음
- ping 명령어를 통해 루프백 주소를 전달하면 자신의 PC의 TCP/IP가 활성화되어 있는지 확인할 수 있음

### 서브넷 마스크

- IP 주소의 클래스는 구분이 너무 대략적임
- 클래스 A라면 네트워크 수는 126, 호스트 수는 2^24-2대.
  - 단말에 1네트워크당 16,777,214개의 IP 주소를 할당할 수 있음
- 그 많은 단말을 하나의 네트워크로 관리하는 것은 현실적으로 불가능함
- 따라서 서브넷 마스크라는 개념이 등장
- 서브넷 마스크 역할은 IP 주소 클래스의 호스트 주소 부분 중 몇 비트를 서브넷으로 하는 것
- IP 주소 : 128.1.64.0
  - 비트 : 10,000,000 : 00,000,001 : 01000,000 : 00,000,000
  - 서브넷 마스크: 11,111,111 : 11,111,111 : 11,000,000 : 00,000,000
- 네트워크 주소 부분이 16비트, 서브넷 부분이 2비트, 남은 14비트가 호스트 주소 부분
  - 128.1.64.0/18 로 표기

### 공인 주소와 사설 주소

- IP 주소에는 공인 주소와 사설 주소가 있다
- 공인 주소는 전 세계 어디서도 중복되지 않도록 IANA(Internet Assigned Numbers Authority)라는 단체가 관리함
  - 인터넷에 접속할 때는 일반적으로 공인 주소
- 폐쇄 네트워크(로컬 네트워크) 즉 외부와 접속하지 않는 네트워크는 임의의 주소를 사용해도 됨

### 정리

- IP 주소는 네트워크 기기나 단말을 식별하기 위한 주소
- IP 주소는 네트워크 주소 부분과 호스트 주소 부분이라는 계층 구조를 가짐

------------

## IPv6

### IPv6의 개요

- 글로벌 IPv4 주소 재고가 2011년에 고갈됨으로 인해 IPv6가 나옴

#### 방대한 수의 주소

- IPv4는 0과 1의 2진수로 이루어진 32비트로 구성
  - 2^32 = 4,294,967,296
- IPv6는 0과 1의 2진수로 된 128비트 값
  - 2^128 약 340조 * 1조 * 1조

#### IPv6 주소 표기

- 16비트별로 구분하여 16진수로 적음
- 구분 문자는 콜론( : )
- IPv6 주소 중에서 네트워크 주소 부분에 해당하는 부분을 프리픽스라고 부르고 그 길이를 / 뒤에 씀

### 정리

- IPv6는 IPv4 주소 고갈 문제를 대처하는 방법 중 하나로 책정된 IPv4를 잇는 규격